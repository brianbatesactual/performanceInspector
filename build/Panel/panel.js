!function(t){function e(t){var e=[];return $.each(t,function(t,o){o.fetchStart<=l&&e.push(o)}),e}function o(){var t;if(chrome&&chrome.devtools){var o=chrome.devtools,a=o.inspectedWindow;a.eval("JSON.stringify(window.performance.getEntries())",function(o,a){a?document.body.innerHTML="Eval code error : "+a:(t=JSON.parse(o),i(t,$(".all")),i(e(t),$(".beforeonload")))})}else t=window.performance.getEntries(),i(t,$(".all")),i(e(t),$(".beforeonload"))}function a(t){var e,o="area",a=[],n=[];$.each(t,function(t,o){a.push(t),e=o/1024/1024,n.push(parseFloat(e.toFixed(4)))}),e="Memory Used",$(".memory > div.container").highcharts({chart:{type:o,backgroundColor:"rgba(255, 255, 255, 0)"},title:{text:e},xAxis:{categories:a},yAxis:{min:0,title:{text:"MB"}},legend:{reversed:!0},plotOptions:{series:{stacking:"normal",dataLabels:{enabled:!0,style:{color:"#333",fontSize:"20px"},formatter:function(){return this.y+"MB"}}}},series:[{name:"current page",data:n}]})}function n(t){function e(t){return t?t-n:t}var o=["redirect","fetch app catch","dns look up","tcp connect","request","response","dom loaded","dom complete","onload"],a=[],n=t.fetchStart;l=t.loadEventStart-n,a.push([e(t.redirectStart),e(t.redirectEnd)],[e(t.fetchStart),e(t.domainLookupStart)],[e(t.domainLookupStart),e(t.domainLookupEnd)],[e(t.connectStart),e(t.connectEnd)],[e(t.requestStart),e(t.responseStart)],[e(t.responseStart),e(t.responseEnd)],[e(t.domLoading),e(t.domContentLoadedEventEnd)],[e(t.domContentLoadedEventEnd),e(t.domComplete)],[e(t.loadEventStart),e(t.loadEventEnd)]),$(".timing > div.column").highcharts({chart:{type:"columnrange",backgroundColor:"rgba(255, 255, 255, 0)",inverted:!0},title:{text:"Timing line"},xAxis:{categories:o},yAxis:{label:"{value} ms",title:{text:"Time for start and end of event"}},legend:{reversed:!0},plotOptions:{columnrange:{dataLabels:{enabled:!0,formatter:function(){return this.y+"ms"}}}},series:[{name:"current page",data:a}]});var i,r=[];$.each(a,function(t,e){i=[],i.push(o[t]),i.push(e[1]-e[0]),r.push(i)}),$(".timing > div.pie").highcharts({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:"Pie view for timing"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"},connectorColor:"silver"}}},series:[{type:"pie",name:"All time percentage",data:r}]})}function i(t,e){var o,a,n=[],i=[],r=[],d={},s={},l=0,c=0,p=[];$.each(t,function(t,e){if(l++,c+=e.duration,a=e.initiatorType,o=s[a],void 0===o){s[a]=n.length,d={drilldown:a,fullName:a,name:a,data:1,y:1},n.push($.extend({},d)),d.data=e.duration,i.push($.extend({},d));var u=e.name,m=u.substr(u.lastIndexOf("/")+1,20),h=u.length<50?u:u.slice(0,30)+"..."+m;d={data:[{fullName:h,name:m,data:e.duration,y:1}],id:a,name:a},r.push($.extend({},d)),p.push(e.duration)}else{var f=n[o].data;f++,n[o].data=f,f=i[o].data,f+=e.duration,i[o].data=f;var u=e.name,m=u.substr(u.lastIndexOf("/")+1,20),h=u.length<50?u:u.slice(0,30)+"..."+m;d={name:m,fullName:h,y:1,data:e.duration},r[o].data.push(d),f=p[o],f+=e.duration,p[o]=f}}),$.each(n,function(t,e){e.y=e.data/l*100}),$.each(i,function(t,e){e.y=e.data/c*100,e.data=e.data.toFixed(4)+"ms"});var u;$.each(r,function(t,e){u=p[t],$.each(e.data,function(t,e){e.y=e.data/u*100,e.data=e.data.toFixed(4)+"ms"})}),$("div.pie-amout",e).highcharts({chart:{type:"pie"},title:{text:"Resources amount detail - total : "+l},subtitle:{text:"Click the slices to view timing details"},plotOptions:{series:{dataLabels:{enabled:!0,format:"{point.name}: {point.y:.1f}%"}}},tooltip:{headerFormat:'<span style="font-size:11px">{series.name}</span><br>',pointFormat:'<span style="color:{point.color};font-weight:bolder;">{point.fullName} </span>: <b>{point.data} </b><br/>'},series:[{name:"Amount of Resource",colorByPoint:!0,data:n}],drilldown:{series:r}}),$("div.pie-duration",e).highcharts({chart:{type:"pie"},title:{text:"Resources duration detail - total : "+parseFloat(c).toFixed(4)+"ms"},subtitle:{text:"Click the slices to view timing details"},plotOptions:{series:{dataLabels:{enabled:!0,format:"{point.name}: {point.y:.1f}%"}}},tooltip:{headerFormat:'<span style="font-size:11px">{series.name}</span><br>',pointFormat:'<span style="color:{point.color};font-weight:bolder;">{point.fullName} </span>: <b>{point.data} </b><br/>'},series:[{name:"Duration of resource",colorByPoint:!0,data:i}],drilldown:{series:r}})}function r(t){a(t.memory),n(t.timing)}function d(){chrome&&chrome.devtools?chrome.devtools.inspectedWindow.eval("window.performance",function(t,e){e?document.body.innerHTML="Eval code error : "+e:(r(t),o())}):(r(window.performance),o()),$("article > h3").on("click",function(t){var e=$(t.target).parents("article");e.find("div").toggle(),e.find("table").toggle()})}var s,l=2e4;t.afterReload=function(t){"reloadcomplete"===t&&(clearTimeout(s),s=setTimeout(function(){d()},2e3))},document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){d()},2e3)})}(window);