!function(e){function t(e){var t=[];return $.each(e,function(e,a){a.fetchStart<=u&&t.push(a)}),t}function a(){var e;if(chrome&&chrome.devtools){var a=chrome.devtools,n=a.inspectedWindow;n.eval("JSON.stringify(window.performance.getEntries())",function(a,n){n?document.body.innerHTML="Eval code error : "+n:(e=JSON.parse(a),s(e,$(".all")),s(t(e),$(".beforeonload")))})}else e=window.performance.getEntries(),s(e,$(".all")),s(t(e),$(".beforeonload"))}function n(e){var t,a="area",n=[],o=[];$.each(e,function(e,a){n.push(e),t=a/1024/1024,o.push(parseFloat(t.toFixed(4)))}),t="Memory Used",$(".memory > div.container").highcharts({chart:{type:a,backgroundColor:"rgba(255, 255, 255, 0)"},title:{text:t},xAxis:{categories:n},yAxis:{min:0,title:{text:"MB"}},legend:{reversed:!0},plotOptions:{series:{stacking:"normal",dataLabels:{enabled:!0,style:{color:"#333",fontSize:"20px"},formatter:function(){return this.y+"MB"}}}},series:[{name:"current page",data:o}]})}function o(e){function t(e){return e?e-o:e}var a=["redirect","fetch app catch","dns look up","tcp connect","request","response","dom loaded","dom complete","onload"],n=[],o=e.fetchStart;u=e.loadEventStart-o,n.push([t(e.redirectStart),t(e.redirectEnd)],[t(e.fetchStart),t(e.domainLookupStart)],[t(e.domainLookupStart),t(e.domainLookupEnd)],[t(e.connectStart),t(e.connectEnd)],[t(e.requestStart),t(e.responseStart)],[t(e.responseStart),t(e.responseEnd)],[t(e.domLoading),t(e.domContentLoadedEventEnd)],[t(e.domContentLoadedEventEnd),t(e.domComplete)],[t(e.loadEventStart),t(e.loadEventEnd)]),$(".timing > div.column").highcharts({chart:{type:"columnrange",backgroundColor:"rgba(255, 255, 255, 0)",inverted:!0},title:{text:"Timing line"},xAxis:{categories:a},yAxis:{label:"{value} ms",title:{text:"Time for start and end of event"}},legend:{reversed:!0},plotOptions:{columnrange:{dataLabels:{enabled:!0,formatter:function(){return this.y+"ms"}}}},series:[{name:"current page",data:n}]});var r,i=[];$.each(n,function(e,t){r=[],r.push(a[e]),r.push(t[1]-t[0]),i.push(r)}),$(".timing > div.pie").highcharts({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:"Pie view for timing"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"},connectorColor:"silver"}}},series:[{type:"pie",name:"All time percentage",data:i}]})}function r(e){var t=e||"",a=e.lastIndexOf("?");-1!==a&&"?"!==e[a-1]&&(t=t.substring(0,a));var n;return n=t.substr(t.lastIndexOf(".")),t=t.substring(0,e.lastIndexOf(".")),n=t.substr(t.lastIndexOf("/")+1)+n}function i(e){var t=e.initiatorType;if(!t||""===t){var a=e.name;if(a){t=a;var n=a.lastIndexOf("?");-1!==n&&"?"!==a[n-1]&&(t=t.substring(0,n)),t=t.substr(t.lastIndexOf(".")+1)}else t="resource"}return t}function s(e,t){var a,n,o=[],s=[],d=[],l={},c={},u=0,p=0,m=[];$.each(e,function(e,t){if(u++,p+=t.duration,n=i(t),a=c[n],void 0===a){c[n]=o.length,l={drilldown:n,fullName:n,name:n,data:1,y:1},o.push($.extend({},l)),l.data=t.duration,s.push($.extend({},l));var f=t.name,h=r(f),g=f.length<50?f:f.slice(0,30)+"..."+h;l={data:[{fullName:g,name:h,data:t.duration,y:1}],id:n,name:n},d.push($.extend({},l)),m.push(t.duration)}else{var v=o[a].data;v++,o[a].data=v,v=s[a].data,v+=t.duration,s[a].data=v;var f=t.name,h=r(f),g=f.length<50?f:f.slice(0,30)+"..."+h;l={name:h,fullName:g,y:1,data:t.duration},d[a].data.push(l),v=m[a],v+=t.duration,m[a]=v}}),$.each(o,function(e,t){t.y=t.data/u*100}),$.each(s,function(e,t){t.y=t.data/p*100,t.data=t.data.toFixed(4)+"ms"});var f;$.each(d,function(e,t){f=m[e],$.each(t.data,function(e,t){t.y=t.data/f*100,t.data=t.data.toFixed(4)+"ms"})}),$("div.pie-amout",t).highcharts({chart:{type:"pie"},title:{text:"Resources amount detail - total : "+u},subtitle:{text:"Click the slices to view timing details"},plotOptions:{series:{dataLabels:{enabled:!0,format:"{point.name}: {point.y:.1f}%"}}},tooltip:{headerFormat:'<span style="font-size:11px">{series.name}</span><br>',pointFormat:'<span style="color:{point.color};font-weight:bolder;">{point.fullName} </span>: <b>{point.data} </b><br/>'},series:[{name:"Amount of Resource",colorByPoint:!0,data:o}],drilldown:{series:d}}),$("div.pie-duration",t).highcharts({chart:{type:"pie"},title:{text:"Resources duration detail - total : "+parseFloat(p).toFixed(4)+"ms"},subtitle:{text:"Click the slices to view timing details"},plotOptions:{series:{dataLabels:{enabled:!0,format:"{point.name}: {point.y:.1f}%"}}},tooltip:{headerFormat:'<span style="font-size:11px">{series.name}</span><br>',pointFormat:'<span style="color:{point.color};font-weight:bolder;">{point.fullName} </span>: <b>{point.data} </b><br/>'},series:[{name:"Duration of resource",colorByPoint:!0,data:s}],drilldown:{series:d}})}function d(e){n(e.memory),o(e.timing)}function l(){chrome&&chrome.devtools?chrome.devtools.inspectedWindow.eval("window.performance",function(e,t){t?document.body.innerHTML="Eval code error : "+t:(d(e),a())}):(d(window.performance),a()),$("article > h3").on("click",function(e){var t=$(e.target),a=$(e.target).parents("article");t.hasClass("help")?a.find("div.help-detail").toggleClass("hide"):(a.find("div").toggle(),a.find("table").toggle())})}var c,u=2e4;e.afterReload=function(e){"reloadcomplete"===e&&(clearTimeout(c),c=setTimeout(function(){l()},2e3))},document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){l()},2e3)})}(window);